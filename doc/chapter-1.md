# Основы JAX-WS и SOAP для современного программиста

Честно говоря, не известно сколько ещё современных Java-проектов используют SOAP. 
В-основном, это должны быть очень старые проекты, или проекты поновее, которым приходится “общаться” со старичками.

Типичная задача в энтерпрайзе такая. Есть сервер, общение с которым ведётся по SOAP протоколу. Нужно передать ему какие-то данные, или получить у него какие-то данные.
В обоих случаях придётся писать клиента на основе той спецификации, которую предоставят владельцы сервера. Эта спецификация называется `WSDL`.

Обычно решение сводится к автоматической генерации классов на основе WSDL, и написанию простенького клиента.

*Технология SOAP, особенно, если начать вникать в неё глубоко, является непростой, а после знакомства с REST вообще складывается впечатление, что SOAP просто невероятно заумный и избыточный протокол.*

*Например, почему бы просто не отправлять XML-документы, получив, ко всему прочему, прирост производительности?*

*Новичок видит непонятную груду классов, сопровождающих сервисы, совсем не очевидный XML, и думает “зачем так сложно-то?”*

*Добивает ситуацию громадное разнообразие примеров и документации в сети, среди которых даже примеры уровня HelloWorld вызывают откровенное недоумение.*

*В этом документе мы постараемся взглянуть на SOAP с другой стороны. Тут почти не будет теории, её хватает в сети.*

**Запомните. Не стремитесь сразу же читать WSDL файлы. Это только введёт в заблуждение. Они создаются роботами для роботов. 
Начните с самого минимального примера, и разобравшись, как он работает, можно будет разобраться и с более тяжёлыми задачами.**

Итак, SOAP. Это всего лишь ещё один протокол обмена данными в сети. Его отличительная особенность – платформонезависимость. XML сообщения одинаково хорошо отправляются 
и принимаются на Linux, Windows и других системах. То есть, Windows-клиент может работать с Linux-сервером и наоборот. 

SOAP-сообщение хранится в конверте (envelope). Как и в случае конверта почтовых сообщений, в нём есть заголовок (`header`) и тело (`body`). Есть ещё элемент `fault`, он возвращается в случае ошибки.
В отличие от REST, SOAP не привязан к HTTP-протоколу, однако, чаще всего он используется именно поверх HTTP. 

При разработке SOAP приложений используется два принципа. Обычно на стороне сервера пишется код, потом на его основе генерируется WSDL файл, и уже на стороне клиента на основе 
этого WSDL-файла генерируются классы клиента.

Все примеры ниже рассчитаны на `Java 8` и `Maven`. Для Java 9 и выше всё чуть-чуть интереснее, надо будет подключать дополнительные зависимости. 
[Подробнее](https://stackoverflow.com/questions/51892528/migration-jaxws-application-from-java-8-to-java-11).

Для языка Java написано несколько реализаций спецификации веб-сервисов, например `Metro`, `Apache CXF`, `Apache Axis2` (не считая эталонной реализации `Metro`, идущей в комплекте с `JDK`).
В примерах мы в основном будем использовать реализацию по умолчанию. В контейнерах `Jboss / WildFly`, кстати, по-умолчанию используется реализация `Apache CXF`. 

Резюмируя:

* `WSDL`: язык описания веб-сервисов и доступа к ним. [Ссылка](https://www.w3.org/TR/wsdl20/)
* `SOAP`: один из стандартов реализации веб-сервисов. [Ссылка](https://www.w3.org/TR/soap/)
* `JAX-WS`: API для создания веб-сервисов. [Ссылка](https://jcp.org/en/jsr/detail?id=224)
* `Metro`: эталонная реализация JAX-WS. По-всей видимости, она идёт в комплекте с Java 8. [Ссылка](https://javaee.github.io/metro-jax-ws/)
* `Apache CXF`: фреймворк, упрощающий напиания веб-сервисов. Поддерживает JAX-WS. [Ссылка](https://cxf.apache.org/)

Судя по-всему, в настоящее время, после знакомства с эталонной реализацией `JAX-WS`, есть смысл работать сразу с `Apache CXF`.

[⌂ оглавление](../README.md) | [далее >>](chapter-2.md)