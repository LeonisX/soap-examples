## Apache CXF

`Apache CXF` - фреймворк для веб-сервисов `Service Oriented Architecture (SOA)`, 
работающий с несколькими стандартными протоколами, включая `SOAP`, `WSDL 1.1` и `2.0`, 
`WS-Addressing`, `WS-Policy`, `WS-ReliableMessaging` и `WS-Security`. 

Apache CXF используется в качестве основного компонента платформы `JBoss Enterprise Platform` / `WildFly`. 

Технически, Apache CXF это ещё одна реализация `JAX-WS` для Java, но этим всё не ограничивается. Другие возможности:

* Генерация `WSDL` из Java-классов и наоборот
* `Provider API` для создания простых ендпоинтов, принимающих сообщения
* `Dispatcher API` для отправки XML сообщений другим ендпоинтам
* Тесная интеграция со `Spring`
* Интеграция с `Aegis Databinding` избавляет от головной боли `JAXB` (неумение работать с интерфейсами, `Map`, датами, и т.д.)
* `RESTful` сервисы
* Поддержка `WS-*`
* А так же многое другое...

CXF предоставляет богатое разнообразие возможностей, которое можно использовать в приложениях.


### Транспорт

CXF работаем с несколькими видами транспорта: HTTP, JMS, и Local (то есть, "in-JVM"). 
Местный транспорт интересен тем, что сообщения передаются в пределах одной JVM, в памяти. В нём можно отключать сериализацию.
А при желании можно написать свой вид транспорта.


### Привязка

Привязка связывает сообщения определённого сервиса с определённым протоколом.
CXF поддерживает несколько видов связывания.
 
* Привязка SOAP, используемое по умолчанию связывает сообщения и SOAP, и может использоваться с различными WS-* модулями в CXF. 
* Pure XML связывание позволяет избежать сериализации конверта SOAP и просто отправляет XML-сообщение, как оно есть.
* HTTP-привязка связывает сервис и HTTP, с использованием семантики RESTful.

### Перехват и модификация сообщений

Это более низкоуровневые возможности работы с XML-сообщениями. Среди них:

* Выполнение аутентификации на основе заголовков
* Обработка пользовательских заголовков
* Преобразование сообщения (например с помощью XSLT или GZip)
* Перенаправление сообщения
* Получение доступа к необработанному потоку ввода-вывода или XML
* Обработчики JAX-WS
* При использовании фронтенда JAX-WS, Apache CXF поддерживает концепцию логических и протокольных обработчиков. 
  Протокольные обработчики позволяют манипулировать сообщением как они есть, часто в формате XML, то есть сообщения SAAJ SOAPMessage. 
  Логические обработчики позволяют манипулировать сообщением после того, как оно уже было преобразовано в объект JAXB, 
  который и получает сервис.

### Перехватчики

Перехватчики предоставляют доступ ко всему функционалу CXF, позволяя делать практически всё, 
включая манипулирование необработанными байтами или XML сообщения.

### Передача двоичных данных

CXF предоставляет средства для эффективной передачи двоичных данных через стандарт MTOM. 
Обычно двоичные данные внутри сообщения XML должны быть в кодировке Base64. 
Это приводит к накладным расходам на обработку и увеличивает размер сообщения на 30%. 
Используя MTOM, CXF будет отправлять/получать сообщения MIME сообщения, сохранённые как вложение MIME, 
так же, как это происходит при отправке электронной почты. Эффективность передачи данных от этого только возрастает,
а так же появляется возможность передавать сообщения, намного большие, чем память.

### WS-* спецификации

* WS-Addressing
* WS-Policy
* WS-Security
* WS-ReliableMessaging

### Управление выполнением

С помощью Invoker можно настраивать как будет выполнен определённый метод или объект бэкенд сервиса.
Это особенно полезно, если базовые объекты сервиса не являются простыми бинами Java, их нужно создавать, либо искать
через собственную фабрику.


Почти все примеры далее написаны для EE-контейнера Wildfly, поэтому, 
разумным решением на производстве будет писать серверную часть используя `EJB` бины и голый `JAX-WS`, а клиентскую - используя `Apache CXF`.

С одной стороны не будет боли по интеграции специфичных решений от `Apache CXF` с контейнером, а с другой,
мы воспользуемся гибкостью Apache CXF для написания клиентов.

[<< назад](chapter-7.md) | [⌂ оглавление](../README.md) | [далее >>](chapter-8.md)