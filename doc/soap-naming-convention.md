# SOAP Naming Convention

# Правила присвоения имён SOAP

В сети нет однозначно чёткого определения того, как нужно именовать сервисы `SOAP` и их методы,
в этом документе мы постараемся собрать лучшие практики.

Начнём с официального документа [SOAP Version 1.2 Part 1: Messaging Framework (Second Edition)](https://www.w3.org/TR/soap12-part1)

В разделе 3.1.1 сказано так: 
"`A URI used to name the feature. This enables the feature to be unambiguously referenced in description languages or during negotiation.`"

Дословно перевести на русский язык это врядли получится, но смысл следующий:

**Глядя на URI вызова метода сервиса у клиента не должно возникать вопросов о его назначении.**

**Имя операции должно однозначно и недвусмысленно описывать то, что эта операция выполняет.**

То есть, **именуя сервис и его метод, следует думать с точки зрения потребителя этого сервиса.**

Плохие примеры:

* Имя метода "`execute`" не даёт понять что именно он выполняет. Нужна конкретизация, например, "`executeScheduledCleanUp`".
* Сервис "`Report`". Непонятна сфера его применения. О каких именно отчётах идёт речь? Может быть это бухгалтеские отчёты, а может отчёты о количестве падений сервера.

Пожалуй, самый детальный источник информации об именовании в SOAP на сегодняшний день, это
[SOA Standards. Service Naming Conventions](https://www.ehealthontario.on.ca/architecture/education/courses/service-oriented-architecture/downloads/SOA-ServiceNamingConventions.pdf)

Эти правила внедрялись в компании `eHealth`, и, хотя это не официальный промышленный стандарт, считаем, что его можно брать за основу.

*Мы рассмотрим только именование сервисов и методов. Именование пространств имён и элементов WSDL остаются для самостоятельного изучения*.

## Имя сервиса

Хорошая практика именовнания сервисов уровня данных:

* существительное

Одно слово, описывающее сервис. 
Если сервис выполняет более конкретную задачу, или одним существительным его не удаётся описать, то не грех прибегнуть
к вспомогательным словам, например:

* глагол + существительное
* существительное + существительное
* существительное + глагол

Главное помнить: **краткость - сестра таланта**.

Примеры:

* `User`: здесь достаточно одного существительного, поскольку будет всего несколько простых операций над сущностью пользователя
* `UserReport`: отчёты пользователя
* `ManageUser`: управление пользователем, но не его отчётами
* `UserManagement`: то же самое, но другими словами

Последние два примера описывают одно и то же, но используются разные стили именования. 
Для всех сервисов следует придерживаться одного из них и стараться не смешивать.

## Имя метода

Основная формула для названия метода такая:

* действие + объект + [субъект]

* глагол + существительное + [существительное]

То есть, это действие, и объект, к которому это действие применяется. Вспомогательное слово может использоваться для конкретизации.

Примеры ниже будут на русском, чтобы лучше показать суть.

**Никогда не используйте в названиях русские слова, какие-то сокращения и жаргонизмы. Только чистый официальный американский английский.**

* сохранитьПользователя (`saveUser`)
* получитьОценкиУченика (`get/retrieveStudentNotes`)
* опубликоватьОтчёт (`publishReport`)
* обновитьСостояниеОтчёта (`updateReportState`)

Область действия метода не должна выходить за область действия сервиса. 

Плохой пример: `User.printServerStatistic`. 
Операция распечатки статистики сервера совершенно не связана с сущностью пользователя.
Её лучше вынести в отдельный сервис, что-то вроде: `Server.printStatistic`.

Поскольку мы живём в мире `Java`, то и именовать сервисы и их методы следует как `CamelCase`, причём, 

* `сервисы` (как и классы) начинаются с большой буквы, а
* `методы` (как и методы класса) с маленькой.

Примеры: `User`, `getName`, `selectBestReader`

Следующее правило касается длины названия сервиса. Оно накладывается Java. Врядли вы его превысите, это 254 символа, ограничение имени конструктора.

Так же все правила именования методов и классов Java одинаково хорошо применимы и к SOAP.

* Не ставить число в начало названия метода
* Стараться не использовать числа в названиях, а если использовать, то после числа надо ставить большую букву
* Желательно, чтобы первые 2 буквы метода были маленькими

И старайтесь без причины не указывать "`SOAP`" в названиях, это итак подразумевается. Помните: краткость - сестра таланта.

Ещё рекомендации:

* Не использовать мало известные аббревиатуры или акронимы
* Не указывать версию в названии сервиса (это дожно решаться на уровне URL)
* Не выносить особенности реализации в название метода. Если реализация поменяется, то это введёт в заблуждение
* Не включать название протокола (SOAP)  в названия сервисов
* Стараться не добавлять к названию сервиса "`Service`", если без этого можно обойтись

## Общепринятые глаголы

Чтобы не вводить клиента в заблуждение, следует придерживаться этих трёх простых слов:

* Put: операция полного создания объекта
* Get: получить конкретный экземпляр объекта по его идентификатору
* List: запрос, возвращающий все объекты, соответствующие заданному критерию поиска

Если операции никак не вписываются в рамки префиксов, приведённых выше, то рекомендованный список таков: 

* Create: операция полного создания объекта. Синоним Put
* Add: добавить дочерний объект в родительский объект
* Initiate: инициировать создание объекта
* Update: обновить атрибуты объекта
* Amend: изменить атрибуты объекта после того, как он был одобрен, завершён или передан
* Deactivate: "мягкое" удаление объекта, то есть, физически он остаётся в базе данных, но в деактивированном состоянии. Например, перестаёт отображаться в результатах поиска
* Activate: операция, обратная предыдущей
* Delete/Remove: полное удаление объекта
* Query/Find: запрос, возвращающий все объекты, соответствующие заданному критерию поиска. Синоним List
* Retrieve: получить конкретный экземпляр объекта по его идентификатору. Синоним Get
* Publish: публикация конкретного объекта или артефакта
* Submit: передача объекта на рассмотрение или утверждение
* Withdraw: операция, обратная предыдущей
* update<имяОъекта>State: изменение состояние первичного объекта

## Что дальше?

После того, как мы назовём наши классы и методы, на их основе генерируется WSDL-файл, и на его основе генерируются клиентские классы. 
Более того, сервис и метод это лишь часть URI. Не надо забывать про доменное имя, версию, и прочее-прочее. 
Вполне вероятно, что после публикации сервиса, глядя на полный URI или содержимое WSDL-файла, появится желание вернуться и сделать всё иначе. 

Автор статьи [WSDL Naming Conventions](https://myarch.com/wsdl-naming-conventions/), 
рекомендует давать типу порта (`wsdl:portType`) и самому порту имя интерфейса. 
Так же он не любит добавлять "`Service`", чтобы не получить "`ServiceService`".

Такие вещи приходят с опытом, просто внимательно изучайте то, что у вас получилось и старайтесь сделать это лучше.

Так же рекомендуется посмотреть [Web Service Standards and Conventions](https://docs.oracle.com/cd/E82085_01/150/retail_soa_enabler_tool_guide/or-rse-Standards.htm).

В этом документа в очень краткой форме описано многое из того, что мы уже знаем, а так же то, что мы здесь рассмотреть не успели.